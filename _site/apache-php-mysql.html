<!DOCTYPE html>
<html>
<head>
    <!--
    * Author:         BeiYuu
    -->
    <meta charset="utf-8" />
    <title>在OSX 10.11 EI Capitan中运行Apache，MySQL，PHP和phpMyAdmin | NatsuZone.com</title>
    <meta name="author" content="Natsu" />
    <meta name="renderer" content="webkit">
    <meta name="description" content="Natsu's Blog" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0">
    <link rel="stylesheet" href="/css/default.css" type="text/css" />
    <link rel="shortcut icon" href="/favicon.png" type="image/png" />
    <link rel="alternate" type="application/atom+xml" title="Recent Entries" href="/atom.xml" />
    <script src="/js/jquery-1.7.1.min.js" type="text/javascript"></script>
</head>
<body>

    <div class="home-menu">
        <div class="home-icon-con">
            <a class="home-menu-icon" href="/">Natsu</a>
            <a class="home-follow" href="#" title="Contact Me">+</a>
        </div>
        <div class="home-contact">
            <a href="http://weibo.com/1720433822" target="_blank" style="margin-left:-5px;"><img src="http://www.weibo.com/favicon.ico" alt="" width="25"/></a>
            <a href="https://github.com/moenatsu" target="_blank" style="text-align:center;"><img src="https://github.com/fluidicon.png" alt="" width="25"/></a>
<!--            <a href="http://instagram.com/beiyuu/" target="_blank" style="text-align:right"><img src="http://d36xtkk24g8jdx.cloudfront.net/bluebar/00c6602/images/ico/favicon.ico" alt="" width="22"/></a>-->
        </div>
    </div>

    <link rel="stylesheet" href="/js/prettify/prettify.css" />
<style type="text/css">
    body { background:#e8e8e8; }
    @media screen and (max-width: 750px){
        body { background:#fff; }
    }
    @media screen and (max-width: 1020px){
        body { background:#fff; }
    }
</style>

<div id="content">
    <div class="entry">
        <h1 class="entry-title"><a href="/apache-php-mysql" title="在OSX 10.11 EI Capitan中运行Apache，MySQL，PHP和phpMyAdmin">在OSX 10.11 EI Capitan中运行Apache，MySQL，PHP和phpMyAdmin</a></h1>
        <p class="entry-date">2016-05-24</p>
        <p>在OSX 10.11 EI Capitan中，系统已经自带Apache和PHP，本文将介绍如何在OSX 10.11 EI Capitan系统中搭建Apache、PHP、MySQL以及phpMyAdmin。</p>

<h2 id="apache">Apache</h2>
<p>在OSX 10.11 EI Capitan中，系统已经自带Apache，我们可以用终端来管理它。</p>

<p>启动Apache：</p>

<pre><code>sudo apachectl start
</code></pre>

<p>停止：</p>

<pre><code>sudo apachectl stop
</code></pre>

<p>重启：</p>

<pre><code>sudo apachectl restart
</code></pre>

<p>查看Apache版本：</p>

<pre><code>httpd -v
</code></pre>

<p>在启动Apache后，在浏览器中输入<code>http://localhost</code>，你会看见“It works！”字样。
你可以查看Apache的配置文件是否有错，通过输入如下命令：</p>

<pre><code>apachectl configtest
</code></pre>

<p>在<code>http://localhost</code>中，你展示的文件位于<code>/Library/WebServer/Documents/</code>这个系统目录下，另一个web根目录是用户的<code>~/Sites</code>目录，这个目录默认是不存在的，用户可以自己创建，创建完成之后，你会发现这个文件夹图标有一个特殊的唯一的图标，如下图所示：</p>

<p><img src="/images/apache_php_mysql/user-level-webroot-sites-folder.png" alt="user-level-webroot-sites-folder" /></p>

<p>之后，我们需要在<code>/etc/apache2/users/</code>目录下添加一个<code>username.conf</code>文件，具体做法如下，在终端输入如下命令：</p>

<pre><code>cd /etc/apache2/users

sudo nano username.conf
</code></pre>

<p>然后在username.conf中输入如下代码：</p>

<pre><code>&lt;Directory "/Users/username/Sites/"&gt;
AllowOverride All
Options Indexes MultiViews FollowSymLinks
Require all granted
&lt;/Directory&gt;
</code></pre>

<p>其中<code>username</code>为当前账户的名称，之后按<code>ctrl</code>+<code>x</code>，再按<code>y</code>保存退出，该文件的属性应该如下</p>

<pre><code>-rw-r--r--  1 root  wheel  127  5 10 16:55 natsu.conf
</code></pre>

<p>输入<code>ls -l</code>可查看文件属性。</p>

<p>如果你的文件属性和上面有所不同，可通过如下命令来更改：</p>

<pre><code>sudo chmod 644 username.conf
</code></pre>

<p>接下来，你需要做的是打开<code>http.conf</code>并开放一些modules。</p>

<pre><code>sudo nano /etc/apache2/httpd.conf
</code></pre>

<p>取消以下modules的注释：(删除语句前面的<code>#</code>号)</p>

<pre><code>LoadModule authz_core_module libexec/apache2/mod_authz_core.so

LoadModule authz_host_module libexec/apache2/mod_authz_host.so

LoadModule userdir_module libexec/apache2/mod_userdir.so

LoadModule include_module libexec/apache2/mod_include.so

LoadModule rewrite_module libexec/apache2/mod_rewrite.so
</code></pre>

<p>如果你想运行php的话，你还需要取消这行代码的注释：</p>

<pre><code>LoadModule php5_module libexec/apache2/libphp5.so
</code></pre>

<p>之后，你需要取消如下的注释，来允许用户文件路径。</p>

<pre><code>Include /private/etc/apache2/extra/httpd-userdir.conf
</code></pre>

<p>打开另一个Apache配置文件：</p>

<pre><code>sudo nano /etc/apache2/extra/httpd-userdir.conf
</code></pre>

<p>并取消如下内容的注释：</p>

<pre><code>Include /private/etc/apache2/users/*.conf
</code></pre>

<p>保存并退出nano，之后重启Apache。</p>

<pre><code>sudo apachectl restart
</code></pre>

<p>在浏览器输入<code>http://localhost/~username/</code>，你会看见如下页面：</p>

<p><img src="/images/apache_php_mysql/osx-yosemite-user-site.png" alt="osx-yosemite-user-site" /></p>

<h2 id="php">PHP</h2>
<p>要使用php，只需要在<code>httpd.conf</code>中取消一行注释内容即可：
打开<code>httpd.conf</code>：</p>

<pre><code>sudo nano /etc/apache2/httpd.conf
</code></pre>

<p>取消如下内容的注释：</p>

<pre><code>LoadModule php5_module libexec/apache2/libphp5.so
</code></pre>

<p>之后，重启Apache即可。</p>

<h2 id="mysql">MySQL</h2>
<p>在OSX 10.11 中并不自带MySQL，因此你需要<a href="http://dev.mysql.com/downloads/mysql/">下载</a>相应版本的MySQL,直接选择<code>DMG Archive</code>格式的压缩包下载即可。之后按照步骤安装，安装途中会出现如下弹窗，你需要记住这个初始密码（root@localhoost:后面的字符串）。</p>

<p><img src="/images/apache_php_mysql/mysql-root-password.png" alt="mysql-root-password" /></p>

<p>打开<code>系统偏好设置</code>,在最底下的那一排，你会发现<code>MySQL</code>的图标，点击它，之后点击<code>Start MySQL Server</code>,或者你可以直接通过命令行来开关MySQL。</p>

<p>打开：</p>

<pre><code>sudo launchctl load -F  /Library/LaunchDaemons/com.oracle.oss.mysql.mysqld.plist
</code></pre>

<p>关闭：</p>

<pre><code>sudo launchctl unload -F  /Library/LaunchDaemons/com.oracle.oss.mysql.mysqld.plist
</code></pre>

<p>查看版本信息：</p>

<pre><code>/usr/local/mysql/bin/mysql -v -u root -p
</code></pre>

<p>如果你不想每次使用<code>mysql</code>都输入这么长的路径，你可以将<code>mysql</code>的路径配置到你的<code>shell</code>路径中。</p>

<pre><code>cd ; nano .bash_profile
</code></pre>

<p>输入：</p>

<pre><code>export PATH="/usr/local/mysql/bin:$PATH"
</code></pre>

<p>之后使配置文件生效：</p>

<pre><code>source ~/.bash_profile
</code></pre>

<p>接下来你就可以直接使用如下命令了：</p>

<pre><code>mysql -v -u root -p
</code></pre>

<p>改变<code>MySQL</code>的密码方法如下：</p>

<pre><code>/usr/local/mysql/bin/mysqladmin -u root -p'temppassword' password 'newpassword'
</code></pre>

<p>解决2002 MySQL Socket中的问题：</p>

<pre><code>sudo mkdir /var/mysql

sudo ln -s /tmp/mysql.sock /var/mysql/mysql.sock
</code></pre>

<h2 id="phpmyadmin">phpMyAdmin</h2>

<p>下载<a href="https://www.phpmyadmin.net/downloads/">phpMyAdmin</a>,将解压后的文件夹<code>phpmyadmin</code>移动到<code>~/Sites</code>目录下。</p>

<p>创建config文件夹：</p>

<pre><code>mkdir ~/Sites/phpmyadmin/config
</code></pre>

<p>设置文件夹权限：</p>

<pre><code>chmod o+w ~/Sites/phpmyadmin/config
</code></pre>

<p>在浏览器中输入<code>http://localhost/~username/phpmyadmin/setup/</code></p>

<p>选择<code>New server</code></p>

<p><img src="/images/apache_php_mysql/phpmyadmin-set-new-server.png" alt="phpmyadmin-set-new-server" /></p>

<p>选择<code>Authentication</code>,输入user和password,之后点<code>Save</code></p>

<p><img src="/images/apache_php_mysql/phpmyadmin-set-new-server-mysql-password.png" alt="phpmyadmin-set-new-server-mysql-password" /></p>

<p>回到之前页面，你会发现<code>servers</code>下多了一项，点击<code>Save</code>按钮。</p>

<p><img src="/images/apache_php_mysql/phpmyadmin-save-config.png" alt="phpmyadmin-save-config" /></p>

<p>回到之前创建的<code>config</code>文件夹，你会发现多了一个<code>config.inc.php</code>，将它移动到<code>/phpmyadmin</code>文件夹，之后删除空的<code>config</code>文件夹。</p>

<p>现在，打开<code>http://localhost/~username/phpmyadmin/</code>,你会发现你可以连接到MySQL数据库了。</p>

<p><img src="/images/apache_php_mysql/phpmyadmin-4-no-frames.png" alt="phpmyadmin-4-no-frames" /></p>

<p>要更新<code>phpmyadmin</code>的话，只需下载最新的版本，替换掉<code>config.inc.php</code>文件即可。</p>

<h2 id="permissons">Permissons</h2>
<p>要想在本地没有权限限制的情况下运行一个网站，最好设置web根目录和其内容是可写入的。</p>

<p>如果，你有一个网站文件放在<code>~/Sites/testsite</code>下，你可以通过如下方法把它设置为可写的：</p>

<pre><code>sudo chmod -R a+w ~/Sites/testsite
</code></pre>

<p>如果你担心安全问题，不想让所有人都可以写入，你可以将所有者设置成<code>Apache _www</code>,但是在操作文件时你需要以管理员身份进行多次验证你不是所有者。你可以这样做：</p>

<pre><code>sudo chown -R _www ~/Sites/testsite
</code></pre>

<p>这将使文件夹的内容归Apache用户所有。</p>

<p>如果你的网站放在系统文件目录下，你还需要这样做：</p>

<pre><code>sudo chown -R _www /Library/WebServer/Documents/testsite
</code></pre>

<p>做完这些，你就可以在OSX EI Capitan本地运行一个AMP堆栈了。</p>

<p><br />
<br />
原文地址：<a href="https://coolestguidesontheplanet.com/get-apache-mysql-php-and-phpmyadmin-working-on-osx-10-11-el-capitan/">https://coolestguidesontheplanet.com/get-apache-mysql-php-and-phpmyadmin-working-on-osx-10-11-el-capitan/</a></p>

        <br/>
        <br/>
        <hr/>
        <!-- 多说评论框 start -->
        <div class="ds-thread" data-thread-key="/apache-php-mysql" data-title="在OSX 10.11 EI Capitan中运行Apache，MySQL，PHP和phpMyAdmin" data-url="/apache-php-mysql"></div>
        <!-- 多说评论框 end -->
        <!-- 多说公共JS代码 start (一个网页只需插入一次) -->
        <script type="text/javascript">
            var duoshuoQuery = {short_name:"natsu"};
            (function() {
             var ds = document.createElement('script');
             ds.type = 'text/javascript';ds.async = true;
             ds.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') + '//static.duoshuo.com/embed.js';
             ds.charset = 'UTF-8';
             (document.getElementsByTagName('head')[0]
              || document.getElementsByTagName('body')[0]).appendChild(ds);
             })();
        </script>
        <!-- 多说公共JS代码 end -->
    </div>
    
    <div class="sidenav">
        <iframe width="100%" height="75" class="share_self"  frameborder="0" scrolling="no" src="http://widget.weibo.com/weiboshow/index.php?language=&width=0&height=75&fansRow=2&ptype=1&speed=0&skin=5&isTitle=0&noborder=0&isWeibo=0&isFans=0&uid=1720433822&verifier=f6339243&dpc=1"></iframe>
    </div>

    <div class="sidenav">
        <h2>Blog</h2>
        <ul class="artical-list">
        
            <li><a href="/arc-leak">在ARC下调用performSelector方法导致的内存泄露问题</a></li>
        
            <li><a href="/apache-php-mysql">在OSX 10.11 EI Capitan中运行Apache，MySQL，PHP和phpMyAdmin</a></li>
        
            <li><a href="/mac-command-line">Mac终端使用Tips</a></li>
        
            <li><a href="/mac-ruby">如何在Mac终端升级ruby版本【转】</a></li>
        
            <li><a href="/github-pages">使用Github Pages建独立博客</a></li>
        
        </ul>

        <h2>Opinion</h2>
        <ul class="artical-list">
        
            <li><a href="/talk">杂谈</a></li>
        
        </ul>

        <h2>Project</h2>
        <ul class="artical-list">
        
            <li><a href="/city-pickview">城市选择器</a></li>
        
        </ul>
    </div>
</div>



<script src="/js/post.js" type="text/javascript"></script>
<script type="text/javascript">var cnzz_protocol = (("https:" == document.location.protocol) ? " https://" : " http://");document.write(unescape("%3Cspan id='cnzz_stat_icon_1259284578'%3E%3C/span%3E%3Cscript src='" + cnzz_protocol + "s95.cnzz.com/z_stat.php%3Fid%3D1259284578%26show%3Dpic' type='text/javascript'%3E%3C/script%3E"));
</script>



    <script type="text/javascript">
        $(function(){
            $('.home-follow').click(function(e){
                e.preventDefault();

                if($('.home-contact').is(':visible')){
                    $('.home-contact').slideUp(100);
                }else{
                    $('.home-contact').slideDown(100);
                }
            });
        })
    </script>
    <script type="text/javascript">var cnzz_protocol = (("https:" == document.location.protocol) ? " https://" : " http://");document.write(unescape("%3Cspan id='cnzz_stat_icon_1259284578'%3E%3C/span%3E%3Cscript src='" + cnzz_protocol + "s95.cnzz.com/z_stat.php%3Fid%3D1259284578%26show%3Dpic' type='text/javascript'%3E%3C/script%3E"));
    </script>
</body>
</html>
